<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>11.12 BMI | UK Biobank Phenotyping</title>
  <meta name="description" content="11.12 BMI | UK Biobank Phenotyping" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="11.12 BMI | UK Biobank Phenotyping" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="11.12 BMI | UK Biobank Phenotyping" />
  
  
  

<meta name="author" content="Do Hyun Kim" />


<meta name="date" content="2022-04-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="hba1c.html"/>
<link rel="next" href="blood-pressure.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Generating time-to-event data using UK biobank data</a></li>
<li class="chapter" data-level="1" data-path="reformat-raw-data.html"><a href="reformat-raw-data.html"><i class="fa fa-check"></i><b>1</b> Clean raw UKB assesment center data</a></li>
<li class="chapter" data-level="2" data-path="curate-demog-table.html"><a href="curate-demog-table.html"><i class="fa fa-check"></i><b>2</b> Curate demographic table</a></li>
<li class="chapter" data-level="3" data-path="curate-all-ukb_events-table.html"><a href="curate-all-ukb_events-table.html"><i class="fa fa-check"></i><b>3</b> Curate all UKB events table</a><ul>
<li class="chapter" data-level="3.1" data-path="first-occurrence-event-table-and-algorithmically-defined-outcome-table.html"><a href="first-occurrence-event-table-and-algorithmically-defined-outcome-table.html"><i class="fa fa-check"></i><b>3.1</b> First occurrence event table and algorithmically defined outcome table</a></li>
<li class="chapter" data-level="3.2" data-path="custom-defined-outcome-for-dr.html"><a href="custom-defined-outcome-for-dr.html"><i class="fa fa-check"></i><b>3.2</b> Custom defined outcome for DR</a></li>
<li class="chapter" data-level="3.3" data-path="icd-9-10.html"><a href="icd-9-10.html"><i class="fa fa-check"></i><b>3.3</b> ICD 9 &amp; 10</a></li>
<li class="chapter" data-level="3.4" data-path="opcs4.html"><a href="opcs4.html"><i class="fa fa-check"></i><b>3.4</b> OPCS4</a></li>
<li class="chapter" data-level="3.5" data-path="medical-conditions-self-report-ukb.html"><a href="medical-conditions-self-report-ukb.html"><i class="fa fa-check"></i><b>3.5</b> Medical conditions self-report UKB</a></li>
<li class="chapter" data-level="3.6" data-path="self-reported-operations-ukb.html"><a href="self-reported-operations-ukb.html"><i class="fa fa-check"></i><b>3.6</b> Self-reported operations UKB</a></li>
<li class="chapter" data-level="3.7" data-path="standardize-and-merge-event-tables.html"><a href="standardize-and-merge-event-tables.html"><i class="fa fa-check"></i><b>3.7</b> Standardize and merge event tables</a></li>
<li class="chapter" data-level="3.8" data-path="convert-ukb-special-dates-into-normal-dates.html"><a href="convert-ukb-special-dates-into-normal-dates.html"><i class="fa fa-check"></i><b>3.8</b> Convert UKB special dates into “normal” dates</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exclude-sex-mismatch-subjects.html"><a href="exclude-sex-mismatch-subjects.html"><i class="fa fa-check"></i><b>4</b> Filter out subjects with sex mismatch</a></li>
<li class="chapter" data-level="5" data-path="prep_pcp_data.html"><a href="prep_pcp_data.html"><i class="fa fa-check"></i><b>5</b> Prepare UKB Primary Care Data</a></li>
<li class="chapter" data-level="6" data-path="make-code-dictionary.html"><a href="make-code-dictionary.html"><i class="fa fa-check"></i><b>6</b> Create a master code dictionary for primary care data</a><ul>
<li class="chapter" data-level="6.1" data-path="read-v2.html"><a href="read-v2.html"><i class="fa fa-check"></i><b>6.1</b> Read v2</a></li>
<li class="chapter" data-level="6.2" data-path="read-v3.html"><a href="read-v3.html"><i class="fa fa-check"></i><b>6.2</b> Read v3</a></li>
<li class="chapter" data-level="6.3" data-path="tpp-local-codes.html"><a href="tpp-local-codes.html"><i class="fa fa-check"></i><b>6.3</b> TPP local codes</a></li>
<li class="chapter" data-level="6.4" data-path="merge-read-v2-read-v3-and-tpp-dictionaries.html"><a href="merge-read-v2-read-v3-and-tpp-dictionaries.html"><i class="fa fa-check"></i><b>6.4</b> Merge Read v2, Read v3 and TPP dictionaries</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="make-outcome-specific-code-dictionary.html"><a href="make-outcome-specific-code-dictionary.html"><i class="fa fa-check"></i><b>7</b> Make outcome-specific code dictionary</a><ul>
<li class="chapter" data-level="7.1" data-path="prepare-diabetes-code-dictionary.html"><a href="prepare-diabetes-code-dictionary.html"><i class="fa fa-check"></i><b>7.1</b> Prepare diabetes code dictionary</a><ul>
<li class="chapter" data-level="7.1.1" data-path="prepare-diabetes-code-dictionary.html"><a href="prepare-diabetes-code-dictionary.html#define-keywords"><i class="fa fa-check"></i><b>7.1.1</b> Define keywords</a></li>
<li class="chapter" data-level="7.1.2" data-path="prepare-diabetes-code-dictionary.html"><a href="prepare-diabetes-code-dictionary.html#define-codes"><i class="fa fa-check"></i><b>7.1.2</b> Define codes</a></li>
<li class="chapter" data-level="7.1.3" data-path="prepare-diabetes-code-dictionary.html"><a href="prepare-diabetes-code-dictionary.html#create-diabetes-code-dictionary"><i class="fa fa-check"></i><b>7.1.3</b> Create diabetes code dictionary</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="prepare-diabetic-eye-disease-code-dictionary.html"><a href="prepare-diabetic-eye-disease-code-dictionary.html"><i class="fa fa-check"></i><b>7.2</b> Prepare diabetic eye disease code dictionary</a><ul>
<li class="chapter" data-level="7.2.1" data-path="prepare-diabetic-eye-disease-code-dictionary.html"><a href="prepare-diabetic-eye-disease-code-dictionary.html#define-keywords-1"><i class="fa fa-check"></i><b>7.2.1</b> Define keywords</a></li>
<li class="chapter" data-level="7.2.2" data-path="prepare-diabetic-eye-disease-code-dictionary.html"><a href="prepare-diabetic-eye-disease-code-dictionary.html#define-codes-1"><i class="fa fa-check"></i><b>7.2.2</b> Define codes</a></li>
<li class="chapter" data-level="7.2.3" data-path="prepare-diabetic-eye-disease-code-dictionary.html"><a href="prepare-diabetic-eye-disease-code-dictionary.html#create-diabetic-eye-disease-code-dictionary"><i class="fa fa-check"></i><b>7.2.3</b> Create diabetic eye disease code dictionary</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="prepare-diabetic-kidney-disease-code-dictionary.html"><a href="prepare-diabetic-kidney-disease-code-dictionary.html"><i class="fa fa-check"></i><b>7.3</b> Prepare diabetic kidney disease code dictionary</a><ul>
<li class="chapter" data-level="7.3.1" data-path="prepare-diabetic-kidney-disease-code-dictionary.html"><a href="prepare-diabetic-kidney-disease-code-dictionary.html#define-keywords-2"><i class="fa fa-check"></i><b>7.3.1</b> Define Keywords</a></li>
<li class="chapter" data-level="7.3.2" data-path="prepare-diabetic-kidney-disease-code-dictionary.html"><a href="prepare-diabetic-kidney-disease-code-dictionary.html#define-codes-2"><i class="fa fa-check"></i><b>7.3.2</b> Define codes</a></li>
<li class="chapter" data-level="7.3.3" data-path="prepare-diabetic-kidney-disease-code-dictionary.html"><a href="prepare-diabetic-kidney-disease-code-dictionary.html#create-diabetic-kidney-disease-code-dictionary"><i class="fa fa-check"></i><b>7.3.3</b> Create diabetic kidney disease code dictionary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="phenotype-outcomes-ukb.html"><a href="phenotype-outcomes-ukb.html"><i class="fa fa-check"></i><b>8</b> Phenotype outcome events using UKB assessment center data</a><ul>
<li class="chapter" data-level="8.1" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html"><i class="fa fa-check"></i><b>8.1</b> Phenotype outcome events using UKB assessment center data</a><ul>
<li class="chapter" data-level="8.1.1" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#dm"><i class="fa fa-check"></i><b>8.1.1</b> DM</a></li>
<li class="chapter" data-level="8.1.2" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#mi"><i class="fa fa-check"></i><b>8.1.2</b> MI</a></li>
<li class="chapter" data-level="8.1.3" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#unstable-angina"><i class="fa fa-check"></i><b>8.1.3</b> Unstable Angina</a></li>
<li class="chapter" data-level="8.1.4" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#ischemic-stroke"><i class="fa fa-check"></i><b>8.1.4</b> Ischemic Stroke</a></li>
<li class="chapter" data-level="8.1.5" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#hemorrhagic-stroke"><i class="fa fa-check"></i><b>8.1.5</b> Hemorrhagic Stroke</a></li>
<li class="chapter" data-level="8.1.6" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#stroke"><i class="fa fa-check"></i><b>8.1.6</b> Stroke</a></li>
<li class="chapter" data-level="8.1.7" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#pci"><i class="fa fa-check"></i><b>8.1.7</b> PCI</a></li>
<li class="chapter" data-level="8.1.8" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#cvd-death"><i class="fa fa-check"></i><b>8.1.8</b> CVD death</a></li>
<li class="chapter" data-level="8.1.9" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#composite-cvd"><i class="fa fa-check"></i><b>8.1.9</b> Composite CVD</a></li>
<li class="chapter" data-level="8.1.10" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#dr"><i class="fa fa-check"></i><b>8.1.10</b> DR</a></li>
<li class="chapter" data-level="8.1.11" data-path="phenotype-outcome-events-using-ukb-assessment-center-data.html"><a href="phenotype-outcome-events-using-ukb-assessment-center-data.html#ckd"><i class="fa fa-check"></i><b>8.1.11</b> CKD</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><i class="fa fa-check"></i><b>8.2</b> Phenotype control exclusion events using UKB assessment center data</a><ul>
<li class="chapter" data-level="8.2.1" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html#cardiovascular-control-exclusion-events"><i class="fa fa-check"></i><b>8.2.1</b> Cardiovascular control exclusion events</a></li>
<li class="chapter" data-level="8.2.2" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html#cerebrovascular-control-exclusion-events"><i class="fa fa-check"></i><b>8.2.2</b> Cerebrovascular control exclusion events</a></li>
<li class="chapter" data-level="8.2.3" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html#non-coronary-revascularization-procedure-control-exclusion-events"><i class="fa fa-check"></i><b>8.2.3</b> Non-coronary revascularization procedure control exclusion events</a></li>
<li class="chapter" data-level="8.2.4" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html#renal-disease-control-exclusion-events"><i class="fa fa-check"></i><b>8.2.4</b> Renal disease control exclusion events</a></li>
<li class="chapter" data-level="8.2.5" data-path="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html"><a href="phenotype-control-exclusion-events-using-ukb-assessment-center-data.html#eye-disease-control-exclusion-events"><i class="fa fa-check"></i><b>8.2.5</b> Eye disease control exclusion events</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="phenotype-outcomes-pcp.html"><a href="phenotype-outcomes-pcp.html"><i class="fa fa-check"></i><b>9</b> Phenotype outcomes using primary care data</a><ul>
<li class="chapter" data-level="9.1" data-path="phenotype-outcome-events-using-primary-care-data.html"><a href="phenotype-outcome-events-using-primary-care-data.html"><i class="fa fa-check"></i><b>9.1</b> Phenotype outcome events using primary care data</a><ul>
<li class="chapter" data-level="9.1.1" data-path="phenotype-outcome-events-using-primary-care-data.html"><a href="phenotype-outcome-events-using-primary-care-data.html#dm-1"><i class="fa fa-check"></i><b>9.1.1</b> DM</a></li>
<li class="chapter" data-level="9.1.2" data-path="phenotype-outcome-events-using-primary-care-data.html"><a href="phenotype-outcome-events-using-primary-care-data.html#dr-1"><i class="fa fa-check"></i><b>9.1.2</b> DR</a></li>
<li class="chapter" data-level="9.1.3" data-path="phenotype-outcome-events-using-primary-care-data.html"><a href="phenotype-outcome-events-using-primary-care-data.html#ckd-1"><i class="fa fa-check"></i><b>9.1.3</b> CKD</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="phenotype-control-exclusion-events-using-primary-care-data.html"><a href="phenotype-control-exclusion-events-using-primary-care-data.html"><i class="fa fa-check"></i><b>9.2</b> Phenotype control exclusion events using primary care data</a><ul>
<li class="chapter" data-level="9.2.1" data-path="phenotype-control-exclusion-events-using-primary-care-data.html"><a href="phenotype-control-exclusion-events-using-primary-care-data.html#non-diabetic-eye-disease-events"><i class="fa fa-check"></i><b>9.2.1</b> Non-diabetic eye disease events</a></li>
<li class="chapter" data-level="9.2.2" data-path="phenotype-control-exclusion-events-using-primary-care-data.html"><a href="phenotype-control-exclusion-events-using-primary-care-data.html#kidney-disease-control-exclusion-events"><i class="fa fa-check"></i><b>9.2.2</b> Kidney disease control exclusion events</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="traj-ukb.html"><a href="traj-ukb.html"><i class="fa fa-check"></i><b>10</b> Create biomarker trajectory data from UK biobank assessment center data</a></li>
<li class="chapter" data-level="11" data-path="traj-pcp.html"><a href="traj-pcp.html"><i class="fa fa-check"></i><b>11</b> Curate biomarker trajectory data from primary care data</a><ul>
<li class="chapter" data-level="11.1" data-path="total-cholesterol.html"><a href="total-cholesterol.html"><i class="fa fa-check"></i><b>11.1</b> Total cholesterol</a></li>
<li class="chapter" data-level="11.2" data-path="hdl.html"><a href="hdl.html"><i class="fa fa-check"></i><b>11.2</b> HDL</a></li>
<li class="chapter" data-level="11.3" data-path="ldl.html"><a href="ldl.html"><i class="fa fa-check"></i><b>11.3</b> LDL</a></li>
<li class="chapter" data-level="11.4" data-path="triglycerides.html"><a href="triglycerides.html"><i class="fa fa-check"></i><b>11.4</b> Triglycerides</a></li>
<li class="chapter" data-level="11.5" data-path="fasting-glucose.html"><a href="fasting-glucose.html"><i class="fa fa-check"></i><b>11.5</b> Fasting Glucose</a></li>
<li class="chapter" data-level="11.6" data-path="random-glucose.html"><a href="random-glucose.html"><i class="fa fa-check"></i><b>11.6</b> Random glucose</a></li>
<li class="chapter" data-level="11.7" data-path="urine-albumin.html"><a href="urine-albumin.html"><i class="fa fa-check"></i><b>11.7</b> Urine Albumin</a></li>
<li class="chapter" data-level="11.8" data-path="urine-creatinine.html"><a href="urine-creatinine.html"><i class="fa fa-check"></i><b>11.8</b> Urine creatinine</a></li>
<li class="chapter" data-level="11.9" data-path="urine-acr-albumincreatinine-ratio.html"><a href="urine-acr-albumincreatinine-ratio.html"><i class="fa fa-check"></i><b>11.9</b> Urine ACR (Albumin:Creatinine Ratio)</a></li>
<li class="chapter" data-level="11.10" data-path="bloodserum-creatinine.html"><a href="bloodserum-creatinine.html"><i class="fa fa-check"></i><b>11.10</b> Blood/Serum creatinine</a></li>
<li class="chapter" data-level="11.11" data-path="hba1c.html"><a href="hba1c.html"><i class="fa fa-check"></i><b>11.11</b> HbA1c</a></li>
<li class="chapter" data-level="11.12" data-path="bmi.html"><a href="bmi.html"><i class="fa fa-check"></i><b>11.12</b> BMI</a></li>
<li class="chapter" data-level="11.13" data-path="blood-pressure.html"><a href="blood-pressure.html"><i class="fa fa-check"></i><b>11.13</b> Blood Pressure</a></li>
<li class="chapter" data-level="11.14" data-path="reformat-and-trim-trajectory-table-for-each-biomarker.html"><a href="reformat-and-trim-trajectory-table-for-each-biomarker.html"><i class="fa fa-check"></i><b>11.14</b> Reformat and trim trajectory table for each biomarker</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="traj-combine.html"><a href="traj-combine.html"><i class="fa fa-check"></i><b>12</b> Combine biomarker trajectory extracted from from UKB and PCP data</a></li>
<li class="chapter" data-level="13" data-path="phenotype-outcome-combine.html"><a href="phenotype-outcome-combine.html"><i class="fa fa-check"></i><b>13</b> Phenotype outcomes using combination of tables</a><ul>
<li class="chapter" data-level="13.1" data-path="dm-2.html"><a href="dm-2.html"><i class="fa fa-check"></i><b>13.1</b> DM</a></li>
<li class="chapter" data-level="13.2" data-path="dr-2.html"><a href="dr-2.html"><i class="fa fa-check"></i><b>13.2</b> DR</a></li>
<li class="chapter" data-level="13.3" data-path="dkd.html"><a href="dkd.html"><i class="fa fa-check"></i><b>13.3</b> DKD</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="tte-macro.html"><a href="tte-macro.html"><i class="fa fa-check"></i><b>14</b> Generate time-to-event data for macrovascular diabetes complications</a><ul>
<li class="chapter" data-level="14.1" data-path="mi-1.html"><a href="mi-1.html"><i class="fa fa-check"></i><b>14.1</b> MI</a></li>
<li class="chapter" data-level="14.2" data-path="unstable-angina-1.html"><a href="unstable-angina-1.html"><i class="fa fa-check"></i><b>14.2</b> Unstable angina</a></li>
<li class="chapter" data-level="14.3" data-path="ischemic-stroke-1.html"><a href="ischemic-stroke-1.html"><i class="fa fa-check"></i><b>14.3</b> Ischemic stroke</a></li>
<li class="chapter" data-level="14.4" data-path="hemorrhagic-stroke-1.html"><a href="hemorrhagic-stroke-1.html"><i class="fa fa-check"></i><b>14.4</b> Hemorrhagic Stroke</a></li>
<li class="chapter" data-level="14.5" data-path="stroke-1.html"><a href="stroke-1.html"><i class="fa fa-check"></i><b>14.5</b> Stroke</a></li>
<li class="chapter" data-level="14.6" data-path="pci-1.html"><a href="pci-1.html"><i class="fa fa-check"></i><b>14.6</b> PCI</a></li>
<li class="chapter" data-level="14.7" data-path="composite-cvd-mi-unstable-angina-ischemic-stroke-pci-or-cvd-death.html"><a href="composite-cvd-mi-unstable-angina-ischemic-stroke-pci-or-cvd-death.html"><i class="fa fa-check"></i><b>14.7</b> Composite CVD (MI, Unstable Angina, Ischemic Stroke, PCI or CVD death)</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="tte-dr.html"><a href="tte-dr.html"><i class="fa fa-check"></i><b>15</b> Generate time-to-event data for diabetic eye disease</a></li>
<li class="chapter" data-level="16" data-path="tte-dkd.html"><a href="tte-dkd.html"><i class="fa fa-check"></i><b>16</b> Generate time-to-event data for diabetes related kidney disease</a></li>
<li class="chapter" data-level="17" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>17</b> Appendix</a><ul>
<li class="chapter" data-level="17.1" data-path="input-and-output-file-summary.html"><a href="input-and-output-file-summary.html"><i class="fa fa-check"></i><b>17.1</b> Input and output file summary</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">UK Biobank Phenotyping</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="bmi" class="section level2">
<h2><span class="header-section-number">11.12</span> BMI</h2>
<p>Height may be measured using meters or centimeters. Height was filtered to lie between 1.25m (4ft 1.2 inches) and 2.1m (6ft 10.7 inches). Values between 125 and 210 were assumed to be in cm and so were divided by 100.
Weight is measured in kg and was filtered to lie between 30kg(66.1 lb) and 200kg(440.9 lb).
BMI was filtered to lie between 12 and 75 kg/m^2.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="bmi.html#cb233-1"></a><span class="co">#Extract height, weight, and BMI</span></span>
<span id="cb233-2"><a href="bmi.html#cb233-2"></a>hwbmi &lt;-<span class="st"> </span>gp_clinical <span class="op">%&gt;%</span></span>
<span id="cb233-3"><a href="bmi.html#cb233-3"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">grepl</span>(height_weight_BMI_codes, code)) <span class="op">%&gt;%</span></span>
<span id="cb233-4"><a href="bmi.html#cb233-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">coalesce</span>(<span class="kw">as.numeric</span>(value1), <span class="kw">as.numeric</span>(value2), <span class="kw">as.numeric</span>(value3))) <span class="op">%&gt;%</span></span>
<span id="cb233-5"><a href="bmi.html#cb233-5"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(value) <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb233-6"><a href="bmi.html#cb233-6"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">trait =</span> <span class="kw">ifelse</span>(<span class="kw">grepl</span>(<span class="st">&quot;BMI|Body Mass Index&quot;</span>, term_description, <span class="dt">ignore.case=</span>T), <span class="st">&quot;BMI&quot;</span>,</span>
<span id="cb233-7"><a href="bmi.html#cb233-7"></a>                        <span class="kw">ifelse</span>(<span class="kw">grepl</span>(<span class="st">&quot;Height&quot;</span>, term_description, <span class="dt">ignore.case=</span>T), <span class="st">&quot;Height&quot;</span>,</span>
<span id="cb233-8"><a href="bmi.html#cb233-8"></a>                               <span class="st">&quot;Weight&quot;</span>))) <span class="op">%&gt;%</span></span>
<span id="cb233-9"><a href="bmi.html#cb233-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">ifelse</span>(trait <span class="op">==</span><span class="st"> &quot;Height&quot;</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&gt;</span><span class="st"> </span><span class="fl">2.1</span>, value<span class="op">/</span><span class="dv">100</span>, value)) <span class="op">%&gt;%</span><span class="st"> </span><span class="co">#cm to meters</span></span>
<span id="cb233-10"><a href="bmi.html#cb233-10"></a><span class="st">  </span><span class="kw">filter</span>((trait <span class="op">==</span><span class="st"> &quot;Weight&quot;</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&lt;</span><span class="st"> </span><span class="dv">200</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&gt;</span><span class="st"> </span><span class="dv">30</span>) <span class="op">|</span></span>
<span id="cb233-11"><a href="bmi.html#cb233-11"></a><span class="st">         </span>(trait <span class="op">==</span><span class="st"> &quot;Height&quot;</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.1</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.25</span> )<span class="op">|</span></span>
<span id="cb233-12"><a href="bmi.html#cb233-12"></a><span class="st">         </span>(trait <span class="op">==</span><span class="st"> &quot;BMI&quot;</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&lt;</span><span class="st"> </span><span class="dv">75</span> <span class="op">&amp;</span><span class="st"> </span>value <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb233-13"><a href="bmi.html#cb233-13"></a><span class="st">  </span><span class="kw">arrange</span>(f.eid, event_dt)</span>
<span id="cb233-14"><a href="bmi.html#cb233-14"></a></span>
<span id="cb233-15"><a href="bmi.html#cb233-15"></a><span class="co">#Here are the resulting terms:</span></span>
<span id="cb233-16"><a href="bmi.html#cb233-16"></a>hwbmi <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(code, term_description, trait) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb233-17"><a href="bmi.html#cb233-17"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">round</span>(<span class="kw">mean</span>(value), <span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb233-18"><a href="bmi.html#cb233-18"></a><span class="st">  </span><span class="kw">arrange</span>(trait, <span class="kw">desc</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">code</th>
<th align="left">term_description</th>
<th align="left">trait</th>
<th align="right">n</th>
<th align="right">mean</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">22K..</td>
<td align="left">Body Mass Index</td>
<td align="left">BMI</td>
<td align="right">1430129</td>
<td align="right">28.3</td>
</tr>
<tr class="even">
<td align="left">22K2.</td>
<td align="left">Body Mass Index high K/M2</td>
<td align="left">BMI</td>
<td align="right">654</td>
<td align="right">31.0</td>
</tr>
<tr class="odd">
<td align="left">22K1.</td>
<td align="left">Body Mass Index normal K/M2</td>
<td align="left">BMI</td>
<td align="right">356</td>
<td align="right">22.9</td>
</tr>
<tr class="even">
<td align="left">22K4.</td>
<td align="left">Body mass index index 25-29 - overweight</td>
<td align="left">BMI</td>
<td align="right">317</td>
<td align="right">27.4</td>
</tr>
<tr class="odd">
<td align="left">22K5.</td>
<td align="left">Body mass index 30+ - obesity</td>
<td align="left">BMI</td>
<td align="right">203</td>
<td align="right">34.3</td>
</tr>
<tr class="even">
<td align="left">XaJqk</td>
<td align="left">Body mass index 20-24 - normal</td>
<td align="left">BMI</td>
<td align="right">139</td>
<td align="right">23.1</td>
</tr>
<tr class="odd">
<td align="left">22K3.</td>
<td align="left">Body Mass Index low K/M2</td>
<td align="left">BMI</td>
<td align="right">28</td>
<td align="right">18.4</td>
</tr>
<tr class="even">
<td align="left">22K8.</td>
<td align="left">Body mass index 20-24 - normal</td>
<td align="left">BMI</td>
<td align="right">17</td>
<td align="right">23.1</td>
</tr>
<tr class="odd">
<td align="left">XaCDR</td>
<td align="left">Body mass index less than 20</td>
<td align="left">BMI</td>
<td align="right">13</td>
<td align="right">18.5</td>
</tr>
<tr class="even">
<td align="left">XaZcl</td>
<td align="left">Baseline body mass index</td>
<td align="left">BMI</td>
<td align="right">4</td>
<td align="right">33.0</td>
</tr>
<tr class="odd">
<td align="left">22K6.</td>
<td align="left">Body mass index less than 20</td>
<td align="left">BMI</td>
<td align="right">3</td>
<td align="right">19.0</td>
</tr>
<tr class="even">
<td align="left">22K7.</td>
<td align="left">Body mass index 40+ - severely obese</td>
<td align="left">BMI</td>
<td align="right">3</td>
<td align="right">41.9</td>
</tr>
<tr class="odd">
<td align="left">XaJJH</td>
<td align="left">Body mass index 40+ - severely obese</td>
<td align="left">BMI</td>
<td align="right">3</td>
<td align="right">42.8</td>
</tr>
<tr class="even">
<td align="left">229..</td>
<td align="left">O/E - height</td>
<td align="left">Height</td>
<td align="right">946337</td>
<td align="right">1.7</td>
</tr>
<tr class="odd">
<td align="left">229Z.</td>
<td align="left">O/E - height NOS</td>
<td align="left">Height</td>
<td align="right">64</td>
<td align="right">1.7</td>
</tr>
<tr class="even">
<td align="left">2293.</td>
<td align="left">O/E -height within 10% average</td>
<td align="left">Height</td>
<td align="right">11</td>
<td align="right">1.7</td>
</tr>
<tr class="odd">
<td align="left">2292.</td>
<td align="left">O/E - height 10-20% &lt; average</td>
<td align="left">Height</td>
<td align="right">2</td>
<td align="right">1.6</td>
</tr>
<tr class="even">
<td align="left">2291.</td>
<td align="left">O/E-height &gt; 20% below average</td>
<td align="left">Height</td>
<td align="right">1</td>
<td align="right">1.8</td>
</tr>
<tr class="odd">
<td align="left">2294.</td>
<td align="left">O/E-height 10-20% over average</td>
<td align="left">Height</td>
<td align="right">1</td>
<td align="right">1.8</td>
</tr>
<tr class="even">
<td align="left">2296.</td>
<td align="left">O/E - loss of height</td>
<td align="left">Height</td>
<td align="right">1</td>
<td align="right">1.6</td>
</tr>
<tr class="odd">
<td align="left">22A..</td>
<td align="left">O/E - weight</td>
<td align="left">Weight</td>
<td align="right">1575549</td>
<td align="right">80.4</td>
</tr>
<tr class="even">
<td align="left">1622.</td>
<td align="left">Weight increasing</td>
<td align="left">Weight</td>
<td align="right">251</td>
<td align="right">80.8</td>
</tr>
<tr class="odd">
<td align="left">22A3.</td>
<td align="left">O/E - weight within 10% ideal</td>
<td align="left">Weight</td>
<td align="right">122</td>
<td align="right">66.4</td>
</tr>
<tr class="even">
<td align="left">XM01G</td>
<td align="left">Weight observation</td>
<td align="left">Weight</td>
<td align="right">110</td>
<td align="right">72.8</td>
</tr>
<tr class="odd">
<td align="left">22A4.</td>
<td align="left">O/E - weight 10-20% over ideal</td>
<td align="left">Weight</td>
<td align="right">103</td>
<td align="right">81.5</td>
</tr>
<tr class="even">
<td align="left">22AZ.</td>
<td align="left">O/E - weight NOS</td>
<td align="left">Weight</td>
<td align="right">100</td>
<td align="right">71.7</td>
</tr>
<tr class="odd">
<td align="left">XE1h4</td>
<td align="left">O/E - weight greater than 20% over ideal</td>
<td align="left">Weight</td>
<td align="right">64</td>
<td align="right">100.3</td>
</tr>
<tr class="even">
<td align="left">22A5.</td>
<td align="left">O/E - weight &gt; 20% over ideal</td>
<td align="left">Weight</td>
<td align="right">48</td>
<td align="right">97.7</td>
</tr>
<tr class="odd">
<td align="left">22A7.</td>
<td align="left">Baseline weight</td>
<td align="left">Weight</td>
<td align="right">6</td>
<td align="right">99.4</td>
</tr>
<tr class="even">
<td align="left">22A6.</td>
<td align="left">O/E - Underweight</td>
<td align="left">Weight</td>
<td align="right">5</td>
<td align="right">52.2</td>
</tr>
<tr class="odd">
<td align="left">22A8.</td>
<td align="left">Weight loss from baseline weight</td>
<td align="left">Weight</td>
<td align="right">2</td>
<td align="right">54.0</td>
</tr>
<tr class="even">
<td align="left">22A2.</td>
<td align="left">O/E -weight 10-20% below ideal</td>
<td align="left">Weight</td>
<td align="right">1</td>
<td align="right">67.0</td>
</tr>
<tr class="odd">
<td align="left">22AA.</td>
<td align="left">Overweight</td>
<td align="left">Weight</td>
<td align="right">1</td>
<td align="right">86.0</td>
</tr>
<tr class="even">
<td align="left">X76CG</td>
<td align="left">Usual body weight</td>
<td align="left">Weight</td>
<td align="right">1</td>
<td align="right">117.0</td>
</tr>
<tr class="odd">
<td align="left">Xa7wI</td>
<td align="left">Observation of measures of body weight</td>
<td align="left">Weight</td>
<td align="right">1</td>
<td align="right">91.0</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="bmi.html#cb234-1"></a><span class="co">#Separate the traits</span></span>
<span id="cb234-2"><a href="bmi.html#cb234-2"></a>weight &lt;-<span class="st"> </span>hwbmi <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(trait <span class="op">==</span><span class="st"> &quot;Weight&quot;</span>) </span>
<span id="cb234-3"><a href="bmi.html#cb234-3"></a>height &lt;-<span class="st"> </span>hwbmi <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(trait <span class="op">==</span><span class="st"> &quot;Height&quot;</span>) </span>
<span id="cb234-4"><a href="bmi.html#cb234-4"></a>BMI &lt;-<span class="st"> </span>hwbmi <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(trait <span class="op">==</span><span class="st"> &quot;BMI&quot;</span>) </span>
<span id="cb234-5"><a href="bmi.html#cb234-5"></a></span>
<span id="cb234-6"><a href="bmi.html#cb234-6"></a><span class="co">#Some records from data provider 2 give weight and BMI</span></span>
<span id="cb234-7"><a href="bmi.html#cb234-7"></a>bmi_extra &lt;-<span class="st"> </span>weight <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb234-8"><a href="bmi.html#cb234-8"></a><span class="st">  </span><span class="kw">filter</span>(data_provider <span class="op">==</span><span class="st"> </span><span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb234-9"><a href="bmi.html#cb234-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">bmi_extra =</span> <span class="kw">as.numeric</span>(value3)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb234-10"><a href="bmi.html#cb234-10"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(bmi_extra)) <span class="op">%&gt;%</span></span>
<span id="cb234-11"><a href="bmi.html#cb234-11"></a><span class="st">  </span><span class="kw">filter</span>(bmi_extra <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span>)</span>
<span id="cb234-12"><a href="bmi.html#cb234-12"></a><span class="kw">head</span>(bmi_extra)</span></code></pre></div>
<pre><code>##      f.eid data_provider   event_dt value1 value2 value3  code terminology
## 1: 1000372             2 2016-02-02 63.500          23.0 22A..       read2
## 2: 1000425             2 2004-02-26 108.50          39.8 22A..       read2
## 3: 1000425             2 2004-06-04 116.10          42.6 22A..       read2
## 4: 1000425             2 2005-01-11 110.00          40.4 22A..       read2
## 5: 1000425             2 2005-08-12 110.00          40.4 22A..       read2
## 6: 1000425             2 2006-10-25 112.00          41.1 22A..       read2
##    special_dt term_description terminology_note value  trait bmi_extra
## 1:      FALSE     O/E - weight             &lt;NA&gt;  63.5 Weight      23.0
## 2:      FALSE     O/E - weight             &lt;NA&gt; 108.5 Weight      39.8
## 3:      FALSE     O/E - weight             &lt;NA&gt; 116.1 Weight      42.6
## 4:      FALSE     O/E - weight             &lt;NA&gt; 110.0 Weight      40.4
## 5:      FALSE     O/E - weight             &lt;NA&gt; 110.0 Weight      40.4
## 6:      FALSE     O/E - weight             &lt;NA&gt; 112.0 Weight      41.1</code></pre>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="bmi.html#cb236-1"></a><span class="co">#combine the traits in wider format</span></span>
<span id="cb236-2"><a href="bmi.html#cb236-2"></a>weight_pre &lt;-<span class="st"> </span>weight <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(terminology, value1, value2, value3, trait)) <span class="op">%&gt;%</span></span>
<span id="cb236-3"><a href="bmi.html#cb236-3"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">weight =</span> value, <span class="dt">weight_code =</span> code, <span class="dt">weight_term_description =</span> term_description)</span>
<span id="cb236-4"><a href="bmi.html#cb236-4"></a>height_pre &lt;-<span class="st"> </span>height <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(terminology, value1, value2, value3, trait))  <span class="op">%&gt;%</span></span>
<span id="cb236-5"><a href="bmi.html#cb236-5"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">height =</span> value, <span class="dt">height_code =</span> code, <span class="dt">height_term_description =</span> term_description)</span>
<span id="cb236-6"><a href="bmi.html#cb236-6"></a>BMI_pre &lt;-<span class="st"> </span>BMI <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(terminology, value1, value2, value3, trait))  <span class="op">%&gt;%</span></span>
<span id="cb236-7"><a href="bmi.html#cb236-7"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">BMI =</span> value, <span class="dt">BMI_code =</span> code, <span class="dt">BMI_term_description =</span> term_description)</span>
<span id="cb236-8"><a href="bmi.html#cb236-8"></a>bmi_extra_pre &lt;-<span class="st"> </span>bmi_extra <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(terminology, term_description, value1, value2, value3, trait, value)) <span class="op">%&gt;%</span></span>
<span id="cb236-9"><a href="bmi.html#cb236-9"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">bmi_extra_code =</span> code)</span>
<span id="cb236-10"><a href="bmi.html#cb236-10"></a></span>
<span id="cb236-11"><a href="bmi.html#cb236-11"></a>joined_bmi &lt;-<span class="st"> </span><span class="kw">full_join</span>(weight_pre, height_pre) <span class="op">%&gt;%</span></span>
<span id="cb236-12"><a href="bmi.html#cb236-12"></a><span class="st">              </span><span class="kw">full_join</span>(BMI_pre) <span class="op">%&gt;%</span></span>
<span id="cb236-13"><a href="bmi.html#cb236-13"></a><span class="st">              </span><span class="kw">full_join</span>(bmi_extra_pre)</span>
<span id="cb236-14"><a href="bmi.html#cb236-14"></a><span class="kw">head</span>(joined_bmi)</span></code></pre></div>
<pre><code>##      f.eid data_provider   event_dt weight_code special_dt
## 1: 1000050             3 2001-01-24       22A..      FALSE
## 2: 1000050             3 2014-11-25       22A..      FALSE
## 3: 1000068             3 1994-11-30       22A..      FALSE
## 4: 1000068             3 1999-01-07       22A..      FALSE
## 5: 1000068             3 2001-07-20       22A..      FALSE
## 6: 1000068             3 2006-01-18       22A..      FALSE
##    weight_term_description terminology_note weight height_code
## 1:            O/E - weight             &lt;NA&gt;  54.00       229..
## 2:            O/E - weight             &lt;NA&gt;  62.00       229..
## 3:            O/E - weight             &lt;NA&gt;  70.50       229..
## 4:            O/E - weight             &lt;NA&gt;  70.40       229..
## 5:            O/E - weight             &lt;NA&gt;  73.64       229..
## 6:            O/E - weight             &lt;NA&gt;  80.50       229..
##    height_term_description height BMI_code BMI_term_description    BMI
## 1:            O/E - height  1.630    22K..      Body Mass Index 20.300
## 2:            O/E - height  1.630    22K..      Body Mass Index 23.335
## 3:            O/E - height  1.690     &lt;NA&gt;                 &lt;NA&gt;     NA
## 4:            O/E - height  1.690     &lt;NA&gt;                 &lt;NA&gt;     NA
## 5:            O/E - height  1.676    22K..      Body Mass Index 26.200
## 6:            O/E - height  1.680    22K..      Body Mass Index 28.500
##    bmi_extra_code bmi_extra
## 1:           &lt;NA&gt;        NA
## 2:           &lt;NA&gt;        NA
## 3:           &lt;NA&gt;        NA
## 4:           &lt;NA&gt;        NA
## 5:           &lt;NA&gt;        NA
## 6:           &lt;NA&gt;        NA</code></pre>
<p>Clean the combined data, filling in missing height values from previous/subsequent measurements or BMI. Filter out cases where the calculated and reported BMI differ by more than 1.5.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="bmi.html#cb238-1"></a>cleaned_bmi &lt;-<span class="st"> </span>joined_bmi <span class="op">%&gt;%</span></span>
<span id="cb238-2"><a href="bmi.html#cb238-2"></a><span class="st">  </span><span class="kw">group_by</span>(f.eid) <span class="op">%&gt;%</span></span>
<span id="cb238-3"><a href="bmi.html#cb238-3"></a><span class="st">  </span><span class="kw">fill</span>(height, <span class="dt">.direction =</span> <span class="st">&quot;downup&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb238-4"><a href="bmi.html#cb238-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">BMI_coalesce =</span> <span class="kw">round</span>(<span class="kw">coalesce</span>(BMI, bmi_extra), <span class="dv">1</span>),</span>
<span id="cb238-5"><a href="bmi.html#cb238-5"></a>         <span class="dt">BMI_calculated =</span> <span class="kw">round</span>(weight<span class="op">/</span>(height<span class="op">^</span><span class="dv">2</span>), <span class="dv">1</span>),</span>
<span id="cb238-6"><a href="bmi.html#cb238-6"></a>         <span class="dt">BMI_mismatch =</span> BMI_coalesce <span class="op">!=</span><span class="st"> </span>BMI_calculated, </span>
<span id="cb238-7"><a href="bmi.html#cb238-7"></a>         <span class="dt">BMI_diff =</span> BMI_coalesce <span class="op">-</span><span class="st"> </span>BMI_calculated) <span class="op">%&gt;%</span></span>
<span id="cb238-8"><a href="bmi.html#cb238-8"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>(<span class="op">!</span><span class="kw">is.na</span>(BMI_diff) <span class="op">&amp;</span><span class="st"> </span><span class="kw">abs</span>(BMI_diff) <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.5</span>)) <span class="op">%&gt;%</span></span>
<span id="cb238-9"><a href="bmi.html#cb238-9"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">BMI_final =</span> <span class="kw">coalesce</span>(BMI_calculated, BMI_coalesce)) <span class="op">%&gt;%</span></span>
<span id="cb238-10"><a href="bmi.html#cb238-10"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">height =</span> <span class="kw">ifelse</span>(<span class="op">!</span><span class="kw">is.na</span>(height), height, <span class="kw">sqrt</span>(weight<span class="op">/</span>BMI))) <span class="op">%&gt;%</span></span>
<span id="cb238-11"><a href="bmi.html#cb238-11"></a><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">BMI_reported =</span> BMI_coalesce, <span class="dt">height_carried =</span> height) <span class="op">%&gt;%</span></span>
<span id="cb238-12"><a href="bmi.html#cb238-12"></a><span class="st">  </span><span class="kw">filter</span>(height_carried <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.1</span> <span class="op">&amp;</span><span class="st"> </span>height_carried <span class="op">&gt;</span><span class="st"> </span><span class="fl">1.25</span> <span class="op">&amp;</span><span class="st"> </span></span>
<span id="cb238-13"><a href="bmi.html#cb238-13"></a><span class="st">           </span>BMI_final <span class="op">&lt;</span><span class="st"> </span><span class="dv">75</span> <span class="op">&amp;</span><span class="st"> </span>BMI_final <span class="op">&gt;</span><span class="st"> </span><span class="dv">12</span>) <span class="op">%&gt;%</span></span>
<span id="cb238-14"><a href="bmi.html#cb238-14"></a><span class="st">  </span><span class="kw">select</span>(f.eid, data_provider, event_dt, weight, height_carried, </span>
<span id="cb238-15"><a href="bmi.html#cb238-15"></a>         BMI_reported, BMI_calculated, <span class="dt">BMI =</span> BMI_final) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb238-16"><a href="bmi.html#cb238-16"></a><span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span></span>
<span id="cb238-17"><a href="bmi.html#cb238-17"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">source=</span><span class="st">&quot;PC&quot;</span>)</span>
<span id="cb238-18"><a href="bmi.html#cb238-18"></a></span>
<span id="cb238-19"><a href="bmi.html#cb238-19"></a><span class="kw">ggplot</span>(<span class="dt">data=</span>cleaned_bmi, <span class="kw">aes</span>(<span class="dt">x=</span><span class="kw">log10</span>(BMI))) <span class="op">+</span><span class="st"> </span><span class="kw">geom_density</span>() <span class="op">+</span><span class="st"> </span><span class="kw">theme_minimal</span>()</span></code></pre></div>
<p><img src="11-phenotype_biomarker_trajectory_pcp_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="hba1c.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="blood-pressure.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
